{"ast":null,"code":"$(document).ready(function () {\n  if ($(\".subscription-form-intake\").length > 0) {\n    var setError = function setError(event) {\n      submit.prop(\"disabled\", true);\n      displayError.show();\n      displayError.text(event.error.message);\n    };\n\n    var removeError = function removeError() {\n      submit.prop(\"disabled\", false);\n      displayError.hide();\n      displayError.text(\"\");\n    };\n\n    var stripeTokenHandler = function stripeTokenHandler(token) {\n      // Insert the token ID into the form so it gets submitted to the server\n      var hiddenInput = document.createElement('input');\n      hiddenInput.setAttribute('type', 'hidden');\n      hiddenInput.setAttribute('name', 'subscription[card_token]');\n      hiddenInput.setAttribute('value', token.id);\n      form.appendChild(hiddenInput); // Submit the form\n\n      form.submit();\n    };\n\n    // Create a Stripe client.\n    var stripe = Stripe('pk_test_I573fsWrRvgFhEu807gjwi3j00cVjJH3nZ'); // Create an instance of Elements.\n\n    var elements = stripe.elements(); // Custom styling can be passed to options when creating an Element.\n    // (Note that this demo uses a wider set of styles than the guide below.)\n\n    var style = {\n      base: {\n        color: '#32325d',\n        fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',\n        fontSmoothing: 'antialiased',\n        fontSize: '16px',\n        '::placeholder': {\n          color: '#aab7c4'\n        }\n      },\n      invalid: {\n        color: '#fa755a',\n        iconColor: '#fa755a'\n      }\n    };\n    var cardNumberElement = elements.create('cardNumber', {\n      style: style\n    });\n    cardNumberElement.mount('#card-number-element');\n    var cardExpiryElement = elements.create('cardExpiry', {\n      style: style\n    });\n    cardExpiryElement.mount('#card-expiry-element');\n    var cardCvcElement = elements.create('cardCvc', {\n      style: style\n    });\n    cardCvcElement.mount('#card-cvc-element'); // Add an instance of the card Element into the `card-element` <div>.\n    //    card.mount('#card-element');\n\n    var form = document.getElementById('subscription-form');\n    submit = $('#subscription-form').find(\"input[type='submit']\");\n    var displayError = $('#card-errors');\n    cardNumberElement.addEventListener('change', function (event) {\n      if (event.error) {\n        setError(event);\n      } else {\n        removeError();\n      }\n    });\n    cardExpiryElement.addEventListener('change', function (event) {\n      if (event.error) {\n        setError(event);\n      } else {\n        removeError();\n      }\n    });\n    cardCvcElement.addEventListener('change', function (event) {\n      if (event.error) {\n        setError(event);\n      } else {\n        removeError();\n      }\n    });\n    form.addEventListener('submit', function (event) {\n      event.preventDefault();\n      var options = {\n        address_zip: $('#postal-code').val(),\n        name: $('#full-name').val()\n      };\n      stripe.createToken(cardNumberElement, options).then(function (result) {\n        if (result.error) {\n          // Inform the customer that there was an error.\n          displayError.show(\"slow\");\n          displayError.text(result.error.message);\n          $(\"#card-errors\").css(\"visibility\", \"visible\");\n          submit.prop(\"disabled\", false);\n          submit.val(\"Subscribe\");\n        } else {\n          // Send the token to your server.\n          submit.prop(\"disabled\", true);\n          $('#overlay').fadeIn();\n          stripeTokenHandler(result.token);\n        }\n      });\n    });\n  }\n});","map":{"version":3,"sources":["/Users/arkhitech/work/cefiles-prod/app/javascript/packs/card.js"],"names":["$","document","ready","length","setError","event","submit","prop","displayError","show","text","error","message","removeError","hide","stripeTokenHandler","token","hiddenInput","createElement","setAttribute","id","form","appendChild","stripe","Stripe","elements","style","base","color","fontFamily","fontSmoothing","fontSize","invalid","iconColor","cardNumberElement","create","mount","cardExpiryElement","cardCvcElement","getElementById","find","addEventListener","preventDefault","options","address_zip","val","name","createToken","then","result","css","fadeIn"],"mappings":"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","sourcesContent":["$(document).ready(function(){\n    if( $(\".subscription-form-intake\").length > 0){\n        // Create a Stripe client.\n        var stripe = Stripe('pk_test_I573fsWrRvgFhEu807gjwi3j00cVjJH3nZ');\n\n        // Create an instance of Elements.\n        var elements = stripe.elements();\n        // Custom styling can be passed to options when creating an Element.\n        // (Note that this demo uses a wider set of styles than the guide below.)\n        var style = {\n            base: {\n                color: '#32325d',\n                fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',\n                fontSmoothing: 'antialiased',\n                fontSize: '16px',\n                '::placeholder': {\n                    color: '#aab7c4'\n                }\n            },\n            invalid: {\n                color: '#fa755a',\n                iconColor: '#fa755a'\n            }\n        };\n\n        var cardNumberElement = elements.create('cardNumber', {\n            style: style\n        });\n        cardNumberElement.mount('#card-number-element');\n\n        var cardExpiryElement = elements.create('cardExpiry', {\n            style: style\n        });\n        cardExpiryElement.mount('#card-expiry-element');\n\n        var cardCvcElement = elements.create('cardCvc', {\n            style: style\n        });\n        cardCvcElement.mount('#card-cvc-element');\n\n        // Add an instance of the card Element into the `card-element` <div>.\n        //    card.mount('#card-element');\n        var form = document.getElementById('subscription-form');\n        submit = $('#subscription-form').find(\"input[type='submit']\")\n        var displayError = $('#card-errors')\n        cardNumberElement.addEventListener('change', function(event) {\n            if (event.error) {\n                setError(event)\n            } else {\n                removeError()\n            }\n        });\n        cardExpiryElement.addEventListener('change', function(event) {\n            if (event.error) {\n\n                setError(event)\n            } else {\n                removeError()\n            }\n        });\n        cardCvcElement.addEventListener('change', function(event) {\n            if (event.error) {\n                setError(event)\n            } else {\n                removeError()\n            }\n        });\n        function setError(event){\n            submit.prop(\"disabled\",true)\n            displayError.show()\n            displayError.text(event.error.message)\n        }\n        function removeError(){\n            submit.prop(\"disabled\",false)\n            displayError.hide()\n            displayError.text(\"\");\n        }\n\n        form.addEventListener('submit', function(event) {\n            event.preventDefault();\n            var options = {\n                address_zip: $('#postal-code').val(),\n                name: $('#full-name').val()\n            };\n            stripe.createToken(cardNumberElement,options).then(function(result) {\n                if (result.error) {\n                    // Inform the customer that there was an error.\n                    displayError.show(\"slow\")\n                    displayError.text(result.error.message)\n                    $(\"#card-errors\").css(\"visibility\", \"visible\");\n                    submit.prop(\"disabled\",false)\n                    submit.val(\"Subscribe\")\n                } else {\n                    // Send the token to your server.\n                    submit.prop(\"disabled\",true)\n                    $('#overlay').fadeIn()\n                    stripeTokenHandler(result.token);\n                }\n            });\n        });\n        function stripeTokenHandler(token) {\n            // Insert the token ID into the form so it gets submitted to the server\n            var hiddenInput = document.createElement('input');\n            hiddenInput.setAttribute('type', 'hidden');\n            hiddenInput.setAttribute('name', 'subscription[card_token]');\n            hiddenInput.setAttribute('value', token.id);\n            form.appendChild(hiddenInput);\n            // Submit the form\n            form.submit();\n        }\n    }\n})"]},"metadata":{},"sourceType":"module"}